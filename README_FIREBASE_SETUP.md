# Firebase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸš¨ PERMISSION_DENIED ã‚¨ãƒ©ãƒ¼ã®è§£æ±ºæ–¹æ³•

### 1. Firebase Console ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®š

1. [Firebase Console](https://console.firebase.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œboard-game-5164bã€ã‚’é¸æŠ
3. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒRealtime Databaseã€ã‚’é¸æŠ
4. ã€Œãƒ«ãƒ¼ãƒ«ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã€Œå…¬é–‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

```json
{
  "rules": {
    ".read": true,
    ".write": true,
    "simple_rooms": {
      ".read": true,
      ".write": true,
      "$roomId": {
        ".read": true,
        ".write": true,
        "host": {
          ".validate": "newData.hasChildren(['name', 'ready'])"
        },
        "guest": {
          ".validate": "newData.hasChildren(['name', 'ready'])"
        },
        "moves": {
          ".read": true,
          ".write": true
        }
      }
    }
  }
}
```

### 2. Authentication ã®è¨­å®š

1. Firebase Console ã®å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒAuthenticationã€ã‚’é¸æŠ
2. ã€ŒSign-in methodã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€ŒåŒ¿åã€ã‚’æœ‰åŠ¹ã«ã™ã‚‹

### 3. Realtime Database ã®è¨­å®šç¢ºèª

1. Firebase Console ã®ã€ŒRealtime Databaseã€ã§
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URLãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèª
3. ã€Œãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã€ã¾ãŸã¯ä¸Šè¨˜ã®ãƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: PERMISSION_DENIED
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- åŒ¿åèªè¨¼ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URLãŒæ­£ã—ã„ã‹ç¢ºèª

### ã‚¨ãƒ©ãƒ¼: èªè¨¼ãŒå¿…è¦ã§ã™
- åŒ¿åèªè¨¼ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª

### ã‚¨ãƒ©ãƒ¼: ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
- ãƒ«ãƒ¼ãƒ IDãŒæ­£ã—ã„ã‹ç¢ºèª
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ğŸ“ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ã¤ã„ã¦

ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ«ã¯é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ¶é™ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ï¼š

```json
{
  "rules": {
    "simple_rooms": {
      "$roomId": {
        ".read": "auth != null",
        ".write": "auth != null",
        "host": {
          ".write": "!data.exists() || data.child('uid').val() == auth.uid"
        },
        "guest": {
          ".write": "!data.exists() || data.child('uid').val() == auth.uid"
        }
      }
    }
  }
}
```